{"version":3,"sources":["Autocomplete.js","BusStop.js","App.js","index.js"],"names":["useStyles","makeStyles","option","fontSize","marginRight","StopSelect","props","classes","useState","isLoading","setIsLoading","station","setStation","useEffect","fetch","then","res","json","result","console","log","data","Autocomplete","id","onChange","event","value","changeSelectStop","stop","defaultValue","find","element","defaultStop","style","minWidth","options","autoHighlight","getOptionLabel","name_tc","name_en","renderOption","Fragment","renderInput","params","TextField","label","variant","inputProps","autoComplete","theme","title","flexGrow","align","menuButton","spacing","typography","min","BusStop","ref","lastupdts","setLastupdts","lastrefreshts","setLastrefreshts","selectStop","setSelectStop","defaultnumETA","numETA","setNumETA","displayCounter","fetchKMB","filter","eta","eta_seq","service_type","isSpecialRoute","rmk_en","includes","generated_timestamp","moment","parseETA","exp","etaInSecond","diff","etaInMin","setInterval","clearInterval","useImperativeHandle","Grid","container","padding","direction","justify","alignItems","flex","justifyContent","ButtonGroup","Button","onClick","disabled","Typography","format","map","route","index","className","dest_tc","dest_en","rmk_tc","src","alt","width","height","forwardRef","SimpleCard","openSideBar","setOpenSideBar","setIsSpecialRoute","elRefs","setElRefs","arrayDefaultStops","setArrayDefaultStops","cookies","Cookies","Array","length","fill","_","i","createRef","get","AppBar","color","Toolbar","IconButton","edge","aria-label","e","current","SwipeableDrawer","open","onOpen","StationJSON","JSON","stringify","set","path","maxAge","state","FormGroup","column","FormControlLabel","control","Checkbox","checked","target","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.4f8d420c.chunk.js","sourcesContent":["/* eslint-disable no-use-before-define */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport Stations from \"./station.json\";\r\n\r\nconst useStyles = makeStyles({\r\n  option: {\r\n    fontSize: 15,\r\n    \"& > span\": {\r\n      marginRight: 10,\r\n      fontSize: 18\r\n    }\r\n  }\r\n});\r\n\r\nexport default function StopSelect(props) {\r\n  const classes = useStyles();\r\n  const getAllStation = () => {\r\n    fetch(\"https://data.etabus.gov.hk/v1/transport/kmb/stop\")\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        return result.data;\r\n      });\r\n  };\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [station, setStation] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetch(\"https://data.etabus.gov.hk/v1/transport/kmb/stop\")\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        console.log(result);\r\n        setStation(result.data);\r\n        setIsLoading(false);\r\n        // console.log(\"station\", station);\r\n        // console.log(\r\n        //   station.find((element) => element.stop === \"8AFF8B43EC3E547F\")\r\n        // );\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"useeffect get station\", getAllStation());\r\n  }, []);\r\n\r\n  return !isLoading ? (\r\n    <Autocomplete\r\n      id=\"country-busstop\"\r\n      onChange={(event, value) => {\r\n        //console.log(value.stop);\r\n        if (value !== null) props.changeSelectStop(value.stop);\r\n      }}\r\n      defaultValue={station.find(\r\n        (element) => element.stop === props.defaultStop\r\n      )}\r\n      style={{ minWidth: 600 }}\r\n      options={station}\r\n      classes={{\r\n        option: classes.option\r\n      }}\r\n      autoHighlight\r\n      getOptionLabel={(option) => option.name_tc + \" \" + option.name_en}\r\n      renderOption={(option) => (\r\n        <React.Fragment>\r\n          {option.name_tc} {option.name_en}\r\n        </React.Fragment>\r\n      )}\r\n      renderInput={(params) => (\r\n        <TextField\r\n          {...params}\r\n          label=\"Choose a bus stop\"\r\n          variant=\"outlined\"\r\n          inputProps={{\r\n            ...params.inputProps,\r\n            autoComplete: \"new-password\" // disable autocomplete and autofill\r\n          }}\r\n        />\r\n      )}\r\n    />\r\n  ) : (\r\n    \"Loading\"\r\n  );\r\n}\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  forwardRef,\r\n  useImperativeHandle\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport moment from \"moment\";\r\n\r\nimport Autocomplete from \"./Autocomplete\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  // root: {\r\n  //   minWidth: 275\r\n  // },\r\n  title: {\r\n    flexGrow: 2,\r\n    align: \"center\"\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2)\r\n  },\r\n  typography: {\r\n    align: \"center\"\r\n  },\r\n  min: {\r\n    align: \"center\"\r\n  }\r\n}));\r\n\r\nconst BusStop = (props, ref) => {\r\n  const classes = useStyles();\r\n  const [station, setStation] = useState([]);\r\n  const [lastupdts, setLastupdts] = useState();\r\n  const [lastrefreshts, setLastrefreshts] = useState();\r\n  const [selectStop, setSelectStop] = useState(\r\n    props.defaultStop ? props.defaultStop : \"9583BCF159B682BA\"\r\n  );\r\n  const [numETA, setNumETA] = useState(\r\n    props.defaultnumETA ? props.defaultnumETA : 1\r\n  );\r\n  const url = \"https://data.etabus.gov.hk/v1/transport/kmb/stop-eta/\";\r\n  const displayCounter = numETA > 0;\r\n\r\n  const changeSelectStop = (stop) => {\r\n    setSelectStop(stop);\r\n  };\r\n\r\n  const fetchKMB = () => {\r\n    console.log(\"fetchKMB\");\r\n    fetch(url + selectStop)\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        console.log(result);\r\n        setStation(\r\n          result.data.filter(\r\n            (eta) =>\r\n              eta.eta_seq <= numETA &&\r\n              eta.service_type === 1 &&\r\n              (props.isSpecialRoute ? true : !eta.rmk_en.includes(\"route only\"))\r\n          )\r\n        );\r\n        setLastupdts(result.generated_timestamp);\r\n        setLastrefreshts(moment());\r\n      });\r\n  };\r\n\r\n  const parseETA = (eta) => {\r\n    var exp = moment(eta);\r\n    var etaInSecond = moment().diff(exp, \"seconds\") * -1;\r\n    var etaInMin = moment().diff(exp, \"minutes\") * -1;\r\n    return etaInSecond > 60 ? etaInMin + \" min\" : \"- min\";\r\n  };\r\n\r\n  const handleIncrement = () => {\r\n    setNumETA(numETA + 1);\r\n  };\r\n\r\n  const handleDecrement = () => {\r\n    setNumETA(numETA - 1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchKMB();\r\n    let id = setInterval(() => {\r\n      fetchKMB();\r\n    }, 5000);\r\n    return () => clearInterval(id);\r\n  }, [selectStop, numETA, props.isSpecialRoute]);\r\n\r\n  useImperativeHandle(\r\n    ref,\r\n    () => ({\r\n      selectStop,\r\n      numETA\r\n    }),\r\n    [selectStop, numETA]\r\n  );\r\n\r\n  return (\r\n    <Grid>\r\n      <Grid container style={{ padding: \"5px\" }}>\r\n        <Grid\r\n          container\r\n          direction=\"row\"\r\n          justify=\"space-between\"\r\n          alignItems=\"center\"\r\n        >\r\n          <Grid align=\"center\" style={{ flex: 2 }}>\r\n            <Autocomplete\r\n              changeSelectStop={changeSelectStop}\r\n              defaultStop={props.defaultStop}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n        <Grid style={{ flex: 1 }} alignItems=\"center\" justifyContent=\"center\">\r\n          <ButtonGroup>\r\n            <Button onClick={handleIncrement}>+</Button>\r\n            {displayCounter && <Button disabled>{numETA}</Button>}\r\n            {displayCounter && <Button onClick={handleDecrement}>-</Button>}\r\n          </ButtonGroup>\r\n        </Grid>\r\n        <Grid style={{ flex: 1, align: \"center\" }}>\r\n          <Typography align=\"right\">\r\n            Last Update Time: {moment(lastupdts).format(\"YYYY/MM/DD HH:mm:ss\")}\r\n          </Typography>\r\n          <Typography align=\"right\">\r\n            Last Refresh Time:{\" \"}\r\n            {moment(lastrefreshts).format(\"YYYY/MM/DD HH:mm:ss\")}\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid direction=\"row\" justify=\"space-between\" alignItems=\"center\">\r\n        {station.map((route, index) => (\r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n            justify=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Grid\r\n              style={{\r\n                flex: 1\r\n                //backgroundColor: \"red\"\r\n              }}\r\n            >\r\n              {route.eta_seq === 1 && (\r\n                <Typography align=\"center\" variant=\"h3\">\r\n                  {route.route}\r\n                </Typography>\r\n              )}\r\n            </Grid>\r\n            <Grid\r\n              style={{\r\n                flex: 4\r\n                //backgroundColor: \"red\"\r\n              }}\r\n            >\r\n              {route.eta_seq === 1 && (\r\n                <Typography\r\n                  align=\"center\"\r\n                  variant=\"h5\"\r\n                  className={classes.typography}\r\n                >\r\n                  <Typography variant=\"h5\" className={classes.typography}>\r\n                    {route.dest_tc}\r\n                  </Typography>\r\n                  <Typography variant=\"h6\" className={classes.typography}>\r\n                    {route.dest_en}\r\n                  </Typography>\r\n                </Typography>\r\n              )}\r\n            </Grid>\r\n            {/* <ListItemText primary={route.route} secondary={route.dest_tc} /> */}\r\n            <Grid\r\n              style={{\r\n                flex: 1\r\n                //backgroundColor: \"red\"\r\n              }}\r\n            >\r\n              <Typography align=\"center\" className={classes.min}>\r\n                {/* <Typography>{moment(route.eta).fromNow()}</Typography>\r\n              <Typography>{route.rmk_tc}</Typography> */}\r\n                <Typography variant=\"h4\">{parseETA(route.eta)}</Typography>\r\n                <Typography variant=\"h6\">{route.rmk_tc}</Typography>\r\n              </Typography>\r\n            </Grid>\r\n            <img\r\n              src=\"https://na.cx/i/cMDkd52.jpg\"\r\n              className=\"photo\"\r\n              alt=\"KMB\"\r\n              width=\"100px\"\r\n              height=\"100px\"\r\n            />\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default forwardRef(BusStop);\r\n","import React, { useState, useEffect, createRef } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\";\nimport SwipeableDrawer from \"@material-ui/core/SwipeableDrawer\";\n\n//checkbox\nimport FormGroup from \"@material-ui/core/FormGroup\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport CheckBoxOutlineBlankIcon from \"@material-ui/icons/CheckBoxOutlineBlank\";\nimport CheckBoxIcon from \"@material-ui/icons/CheckBox\";\nimport Favorite from \"@material-ui/icons/Favorite\";\nimport FavoriteBorder from \"@material-ui/icons/FavoriteBorder\";\n\n//cookies\nimport Cookies from \"universal-cookie\";\n\nimport BusStop from \"./BusStop\";\n\nconst useStyles = makeStyles((theme) => ({\n  BusStop: {\n    flexGrow: 2,\n    align: \"center\"\n  }\n}));\n\nexport default function SimpleCard() {\n  const classes = useStyles();\n  const [numStop, setNumStop] = useState(1);\n  const [openSideBar, setOpenSideBar] = useState(false);\n  const [isSpecialRoute, setIsSpecialRoute] = useState(false);\n  const [elRefs, setElRefs] = useState([]);\n  const [arrayDefaultStops, setArrayDefaultStops] = useState([]);\n  const cookies = new Cookies();\n\n  const handleCheckBox = (event) => {\n    setIsSpecialRoute(event.target.checked);\n  };\n\n  const handleOpenSideBar = () => {\n    setOpenSideBar(true);\n  };\n\n  const handleCloseSideBar = () => {\n    setOpenSideBar(false);\n  };\n\n  const handleSave = () => {\n    const StationJSON = JSON.stringify(elRefs);\n    console.log(elRefs);\n    console.log(StationJSON);\n\n    const cookies = new Cookies();\n\n    cookies.set(\"station\", StationJSON, {\n      path: \"/\",\n      maxAge: 2147483647\n    });\n  };\n\n  const handleAddStation = () => {\n    setArrayDefaultStops((state) => [\n      ...state,\n      {\n        current: { stop: \"\", numETA: 1 }\n      }\n    ]);\n  };\n\n  const handleRemoveAll = () => {\n    setArrayDefaultStops([]);\n  };\n\n  const displayCounter = numStop > 0;\n  const arrLength = numStop;\n\n  useEffect(() => {\n    setElRefs((elRefs) =>\n      Array(arrayDefaultStops.length)\n        .fill()\n        .map((_, i) => elRefs[i] || createRef())\n    );\n  }, [\n    //numStop,\n    arrayDefaultStops\n  ]);\n\n  useEffect(() => {\n    console.log(\"elRefs\", elRefs);\n  }, [elRefs]);\n\n  useEffect(() => {\n    const station = cookies.get(\"station\");\n    if (station) {\n      setArrayDefaultStops(station);\n    }\n  }, []);\n\n  return (\n    <Grid>\n      <AppBar color=\"secondary\">\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"menu\"\n            onClick={handleOpenSideBar}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" className={classes.title}>\n            Bus Arrival Time\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <Toolbar />\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"flex-start\"\n        alignItems=\"baseline\"\n      >\n        {arrayDefaultStops.map((e, i) => (\n          <Grid style={{ flex: 1 }}>\n            <BusStop\n              ref={elRefs[i]}\n              isSpecialRoute={isSpecialRoute}\n              defaultStop={e.current.selectStop}\n              defaultnumETA={e.current.numETA}\n            />\n          </Grid>\n        ))}\n      </Grid>\n      <SwipeableDrawer open={openSideBar} onOpen={openSideBar}>\n        <Button onClick={handleCloseSideBar}>Close</Button>\n        <Button onClick={handleSave}>Save</Button>\n        <Button onClick={handleAddStation}>add</Button>\n        <Button onClick={handleRemoveAll}>remove all</Button>\n        {/* <ButtonGroup>\n          <Button onClick={handleIncrement}>+</Button>\n          {displayCounter && <Button disabled>{numStop}</Button>}\n          {displayCounter && <Button onClick={handleDecrement}>-</Button>}\n        </ButtonGroup> */}\n\n        <FormGroup column>\n          <FormControlLabel\n            control={\n              <Checkbox checked={isSpecialRoute} onChange={handleCheckBox} />\n            }\n            label=\"特別路線\"\n          />\n        </FormGroup>\n      </SwipeableDrawer>\n    </Grid>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}